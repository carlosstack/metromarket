<div class="table-container">

  <mat-form-field appearance="outline" class="col-12" hidden>
    <span matPrefix>
      <li class="fas fa-search p-1"></li>
    </span>
    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar">
  </mat-form-field>


  <table mat-table [dataSource]="dataSource" matSort *ngIf="(oferts && (dataSource.data.length > 0)) && !(oferts && (dataSource.data.length == 0)); else loading">

    <!-- ID Column -->
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="hidden-in-mobile text-secondary">
        Transacción</th>
      <td mat-cell *matCellDef="let ofert" class="hidden-in-mobile">

        <div class="text-center">
          <label class="text-secondary h6">{{ofert.type}}</label>
        </div>

      </td>
    </ng-container>
    <ng-container matColumnDef="owner">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-user-details ">
          Nombre </th>
      <td mat-cell *matCellDef="let ofert">
        <div class=" d-flex justify-content-center align-items-center">
          <div class="text-center">
            <img src="{{ofert.ownerPhotoUrl}}" class="img-fluid img ">
          </div>
          <div class="text-center hidden-in-mobile">
            <div class="oferts-username text-secondary p-1 small">{{ ofert.owner }} </div>
          </div>
        </div>
        <div class="text-center hidden-in-desktop">
          <div class="oferts-username text-secondary p-1 small">{{ ofert.owner }} </div>
          <div class="d-flex justify-content-center align-items-center">
          </div>
        </div>


      </td>
    </ng-container>



    <!-- Progress Column -->
    <ng-container matColumnDef="amountMin">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-secondary "> <div
          class="hidden-in-mobile">Monto</div><div class="hidden-in-desktop">Descripción</div> </th>
      <td mat-cell *matCellDef="let ofert">

        <div class="oferts-description p-3">
          <div class="date hidden-in-desktop">
            <div class="oferts-date text-secondary">{{ ofert.date | date:'short' }} </div>
          </div>
          <div class="item ">
            <div class="">
              <div class="d-flex">
                <strong class="">
                  <div class="d-flex justify-content-center align-content-center text-primary small">
                    <div class="hidden-in-desktop">{{ofert.type}}&nbsp;</div>
                    <strong>{{ ofert.amountToSend + ofert.currencyAmountToSend  }}</strong>&nbsp;
                    <div class=" text-secondary"><strong>{{ ofert.from }}</strong></div>

                  </div>
                  <div class="small d-flex justify-content-center align-content-center text-dark">por</div>

                  <div class="d-flex small justify-content-center align-content-center text-primary">
                    <strong>{{ ofert.amountToReceive}}{{ofert.currencyAmountToReceive }}</strong>&nbsp;
                    <div class="text-secondary" *ngFor="let payForm of ofert.payForms">
                      <strong>{{ payForm }}.&nbsp;</strong>
                    </div>
                  </div>

                </strong>
              </div>

            </div>
            <strong class=" hidden-in-desktop ">
               
                <div class="p-1 d-flex text-secondary flex-wrap">
                  Tasa:&nbsp;{{ ofert.rate }}&nbsp;{{ofert.currencyRate}}
                </div>
            </strong>
          </div>
          <div class="hidden-in-desktop">
            <div class="d-flex flex-column">
              <button title="Estado" class="btn btn-ofert-mobile" [style.background-color]="getColor(ofert.status)">
                <div class="text-white">
                  {{getStatus(ofert)}}
                </div>
              </button>
            </div>
          </div>
        </div>
      </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="payForms">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class=" hidden-in-mobile text-secondary ">
        Tasa </th>
      <td mat-cell *matCellDef="let ofert" class="hidden-in-mobile">
        <div class="d-flex small">
          {{ ofert.rate }}&nbsp;{{ofert.currencyRate}}
        </div>
      </td>
    </ng-container>
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class=" hidden-in-mobile text-secondary">
        Fecha </th>
      <td mat-cell *matCellDef="let ofert" class="hidden-in-mobile">
        <div class="d-flex flex-wrap align-content-center" style="height:100px">

          <div class="date">
            <div class="oferts-date text-secondary">{{ ofert.date | date:'short' }} </div>
          </div>
        </div>
      </td>
    </ng-container>

    <!-- Color Column -->
    <ng-container matColumnDef="rate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class=" hidden-in-mobile text-secondary">
        Estado </th>
      <td mat-cell *matCellDef="let ofert" class="oferts-status text-center hidden-in-mobile">
        <div class="d-flex flex-wrap align-content-center ">
          <button title="Estado" class="btn btn-ofert" [style.background-color]="getColor(getStatusByOfert(ofert))">
            <div class="text-white small">{{getStatus(getStatusByOfert(ofert))}}</div>
          </button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let ofert; columns: displayedColumns;" class="table-row"
      [routerLink]="['/app/exchange/e',{ outlets: {exchange: ['transaction',ofert.ownerUID,ofert.id] } }]">
    </tr>
  </table>

  <mat-paginator [pageSizeOptions]="[15, 20, 30, 100]" class="col-12"></mat-paginator>
</div>

<ng-template #loading>
  <app-loading-exchange></app-loading-exchange>
</ng-template>