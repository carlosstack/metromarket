<div class="row table-container">

  <mat-form-field appearance="outline" class="col-12 bg-white" hidden>
    <span matPrefix>
      <li class="fas fa-search p-1"></li>
    </span>
    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar">
  </mat-form-field>


  <table mat-table [dataSource]="dataSource" matSort *ngIf="oferts; else loading" class="col-12 shadow-sm" >

    <!-- ID Column -->
    <ng-container matColumnDef="owner">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-user-details"> Usuario </th>
      <td mat-cell *matCellDef="let ofert">
          <div class=" text-center">

            <img src="{{ ofert.ownerPhotoUrl }}" class="img-fluid   img-thumbnail img-owner p-1 "
              *ngIf="ofert.ownerPhotoUrl; else defaultProfilePhoto">

            <ng-template #defaultProfilePhoto>
              <img src="../../../../assets/interrogationIcon.png" class="img-fluid  img-thumbnail  p-1">

            </ng-template>
            <div class="oferts-username text-secondary">@{{ ofert.owner }} </div>
            <div class="text-center p-1 hidden-in-desktop">
              <app-rating [user]="ofert.owner"></app-rating>
            </div>
    

          </div>
   

      </td>
    </ng-container>

    <ng-container matColumnDef="ownerData" >
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="hidden-in-mobile">Reputación</th>
      <td mat-cell *matCellDef="let ofert" class="hidden-in-mobile">

          <div class="text-center p-1">
            <app-rating [user]="ofert.owner"></app-rating>
          </div>
  

      </td>
    </ng-container>

    <!-- Progress Column -->
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Descripción </th>
      <td mat-cell *matCellDef="let ofert">

        <div class="oferts-description p-3">
          <div class="date hidden-in-desktop">
            <div class="oferts-date text-secondary">{{ ofert.date | date:'short' }} </div>
          </div>
          <div class="item text-secondary">
            <div class="">
              <div class="d-flex">
                <strong class="text-primary">
                  <div class="item d-flex flex-wrap text-primary">{{ofert.type}}
                    {{ ofert.amountMin + ofert.currencyAmount  }}
                    <div *ngIf="ofert.amountMax > 0"> &nbsp;- {{ ofert.amountMax + ofert.currencyAmount }} </div>
                    &nbsp;{{ ofert.from }}
                  </div>
                </strong>
              </div>
              <div class="oferts-money d-flex">Bs. {{ ofert.rate }}</div>
         
                <div class="d-flex">

                  <div class="item" *ngFor="let payForm of ofert.payForms">
                    {{ payForm }}.&nbsp;
                  </div>
                </div>
            
            </div>
            <div class="hidden-in-desktop">
              <div class="d-flex flex-column">
                <button title="Aceptar" class="btn btn-light btn-ofert-mobile">
                  <div class="text-white">Seleccionar</div>
                </button></div>
            </div>
          </div>
        </div>
      </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="amountMin">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class=" hidden-in-mobile "> Fecha </th>
      <td mat-cell *matCellDef="let ofert" class="hidden-in-mobile">
        <div class="d-flex flex-wrap align-content-center" style="height:100px">

          <div class="date">
            <div class="oferts-date text-secondary">{{ ofert.date | date:'short' }} </div>
          </div>
        </div>
      </td>
    </ng-container>

    <!-- Color Column -->
    <ng-container matColumnDef="payForms">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class=" hidden-in-mobile "> Estado </th>
      <td mat-cell *matCellDef="let ofert" class="oferts-status text-center hidden-in-mobile">
        <div class="d-flex flex-wrap align-content-center ">
          <button class="btn btn-ofert btn-light">
            <div class="text-white">Ir a Whatsapp</div>
          </button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let ofert; columns: displayedColumns;" class="table-row" (click)="openModalConfirm(ofert)">
    </tr>
  </table>

  <mat-paginator [pageSizeOptions]="[15, 20, 30, 100]" class="col-12"></mat-paginator>
</div>

<ng-template #loading>
  <app-loading-exchange class="col-12"></app-loading-exchange>
</ng-template>
